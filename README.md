# 电影推荐系统

这是一个基于RAG（检索增强生成）和LLM（大型语言模型）的电影推荐系统，可以根据用户的兴趣和偏好推荐相关电影。系统从TMDB获取电影数据，使用向量数据库存储电影信息，并通过大语言模型生成个性化的推荐回复。

## 功能特点

- 从TMDB API获取热门电影数据
- 使用硅基API的BGE-M3模型进行文本向量化
- 将电影数据存储到ChromaDB向量数据库
- 基于用户查询检索相似电影
- 使用智谱ChatGLM4生成个性化推荐回复
- 提供友好的Gradio用户界面

## 安装依赖

```bash
pip install requests pandas chromadb gradio
```

## 使用方法

1. 运行主应用程序：

```bash
python app.py
```

2. 在浏览器中打开显示的URL（通常是 http://127.0.0.1:7860）

3. 在"初始化数据"标签页中，设置要获取的电影数量，然后点击"获取并存储电影数据"按钮

4. 数据初始化完成后，切换到"电影推荐"标签页

5. 输入您的电影偏好（例如："我想看一部关于太空探索的科幻电影"），然后点击"获取推荐"按钮

## 项目结构

- `app.py`: 主应用模块，整合所有功能并提供Gradio界面
- `config.py`: 配置文件，存储API密钥和其他配置信息
- `tmdb_data.py`: 从TMDB API获取电影数据的模块
- `vector_store.py`: 向量存储模块，负责将电影数据转换为向量并存储到ChromaDB
- `llm_service.py`: LLM服务模块，负责调用智谱ChatGLM4 API进行大模型推理

## 注意事项

- 首次使用前，需要先在"初始化数据"标签页获取电影数据
- API调用可能受到速率限制，建议适当控制获取的电影数量
- 电影数据会保存到本地CSV文件和向量数据库，后续使用时会优先从本地加载

## 技术栈

- TMDB API: 获取电影数据
- 硅基API (BGE-M3): 文本向量化
- ChromaDB: 向量数据库
- 智谱ChatGLM4: 大语言模型
- Gradio: 用户界面